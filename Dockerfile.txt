
FROM node:22-alpine

WORKDIR /app

# Instala ferramentas de build para módulos nativos se necessário
RUN apk add --no-cache python3 make g++

COPY package*.json ./
RUN npm install

COPY . .

# Compila o TypeScript
RUN npm run build || true 

EXPOSE 3005

# Cheshire roda como um processo de Sistema
CMD ["node", "dist/server.js"]
